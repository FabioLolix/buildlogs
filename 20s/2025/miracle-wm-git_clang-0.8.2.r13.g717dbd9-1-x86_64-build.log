-- The C compiler identification is Clang 21.1.6
-- The CXX compiler identification is Clang 21.1.6
-- Detecting C compiler ABI info
-- Detecting C compiler ABI info - done
-- Check for working C compiler: /usr/bin/clang - skipped
-- Detecting C compile features
-- Detecting C compile features - done
-- Detecting CXX compiler ABI info
-- Detecting CXX compiler ABI info - done
-- Check for working CXX compiler: /usr/bin/clang++ - skipped
-- Detecting CXX compile features
-- Detecting CXX compile features - done
-- Skipping most warnings for non-Debug build
-- Found PkgConfig: /usr/bin/pkg-config (found version "2.5.1")
-- Checking for module 'miral>=5.1'
--   Found miral, version 5.6.0
-- Checking for module 'mirrenderer>=2.18'
--   Found mirrenderer, version 2.23.0
-- Checking for module 'mirplatform>=2.18'
--   Found mirplatform, version 2.23.0
-- Checking for module 'mircommon>=2.18'
--   Found mircommon, version 2.23.0
-- Checking for module 'mircommon-internal>=2.18'
--   Found mircommon-internal, version 2.23.0
-- Checking for module 'mirserver>=2.18'
--   Found mirserver, version 2.23.0
-- Checking for module 'mirserver-internal>=2.18'
--   Found mirserver-internal, version 2.23.0
-- Checking for module 'mirwayland>=2.18'
--   Found mirwayland, version 2.23.0
-- Checking for module 'glib-2.0'
--   Found glib-2.0, version 2.86.2
-- Checking for module 'yaml-cpp'
--   Found yaml-cpp, version 0.8.0
-- Checking for module 'libevdev'
--   Found libevdev, version 1.13.6
-- Found nlohmann_json: /usr/share/cmake/nlohmann_json/nlohmann_jsonConfig.cmake (found suitable version "3.12.0", minimum required is "3.2.0")
-- Checking for module 'egl'
--   Found egl, version 1.5
-- Checking for module 'glesv2'
--   Found glesv2, version 3.2
-- Checking for module 'xkbcommon'
--   Found xkbcommon, version 1.13.0
-- Checking for module 'miral'
--   Found miral, version 5.6.0
-- Checking for module 'mirserver'
--   Found mirserver, version 2.23.0
-- Checking for module 'mirtest'
--   Found mirtest, version 2.23.0
-- Found GTest: /usr/lib/cmake/GTest/GTestConfig.cmake (found version "1.17.0")
-- Checking for module 'mircore'
--   Found mircore, version 2.23.0
-- Checking for module 'json-c'
--   Found json-c, version 0.18
-- Configuring done (1.4s)
-- Generating done (0.0s)
-- Build files have been written to: /build/miracle-wm-git_clang/src/build
[  1%] Building CXX object miraclemsg/CMakeFiles/miracle-ipc.dir/ipc_client.cpp.o
[  2%] Building CXX object miracle-wm-config/CMakeFiles/miracle-wm-config.dir/src/config-c.cpp.o
[  3%] Building CXX object miracle-wm-config/CMakeFiles/miracle-wm-config.dir/src/config-cpp.cpp.o
[  4%] Linking CXX static library libmiracle-ipc.a
[  4%] Built target miracle-ipc
[  6%] Building CXX object miraclemsg/CMakeFiles/miraclemsg.dir/main.cpp.o
[  7%] Linking CXX executable miraclemsg
[  7%] Built target miraclemsg
[  8%] Linking CXX shared library libmiracle-wm-config.so
[  8%] Built target miracle-wm-config
[  9%] Building CXX object miracle-wm-config/CMakeFiles/test_miracle_wm_config_c_api.dir/tests/test_config_cpp.cpp.o
[ 10%] Building CXX object miracle-wm-config/CMakeFiles/test_miracle_wm_config_c_api.dir/tests/test_config_c.cpp.o
[ 12%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/cmake_pch.hxx.pch
[ 15%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/policy.cpp.o
[ 15%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/container.cpp.o
[ 15%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/config.cpp.o
[ 17%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/workspace_manager.cpp.o
[ 18%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/ipc_connection_manager.cpp.o
[ 19%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/output.cpp.o
[ 20%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/auto_restarting_launcher.cpp.o
[ 24%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/window_helpers.cpp.o
[ 24%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/ipc_message_handler.cpp.o
[ 24%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/workspace_observer.cpp.o
[ 25%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/workspace.cpp.o
[ 26%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/parent_container.cpp.o
[ 28%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/window_manager_tools_window_controller.cpp.o
[ 30%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/leaf_container.cpp.o
[ 30%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/tessellation_helpers.cpp.o
[ 32%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/ipc_command.cpp.o
[ 32%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/renderer.cpp.o
[ 34%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/ipc_command_executor.cpp.o
[ 35%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/render_data_manager.cpp.o
[ 36%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/animator.cpp.o
[ 37%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/animation.cpp.o
[ 39%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/program_factory.cpp.o
[ 40%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/mode_observer.cpp.o
[ 41%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/shell_component_container.cpp.o
[ 42%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/container_group_container.cpp.o
[ 43%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/layout_scheme.cpp.o
[ 45%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/scratchpad.cpp.o
[ 46%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/compositor_state.cpp.o
[ 47%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/command_controller.cpp.o
[ 48%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/animator_loop.cpp.o
[ 50%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/drag_and_drop_service.cpp.o
[ 51%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/output_manager.cpp.o
[ 52%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/output_factory.cpp.o
[ 53%] Linking CXX executable test_miracle_wm_config_c_api
[ 54%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/move_service.cpp.o
[ 56%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/resize_service.cpp.o
[ 57%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/forwarding_surface.cpp.o
[ 58%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/dying_surface_manager.cpp.o
[ 59%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/shader_2d.cpp.o
[ 60%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/wlr-output-management-unstable-v1_wrapper.cpp.o
[ 62%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/wlr-ouput-management-unstable-v1.cpp.o
[ 63%] Building CXX object CMakeFiles/miracle-wm-implementation.dir/src/output_listener.cpp.o
In file included from <built-in>:1:
In file included from /build/miracle-wm-git_clang/src/build/CMakeFiles/miracle-wm-implementation.dir/cmake_pch.hxx:5:
In file included from /usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/vector:64:
In file included from /usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_algobase.h:67:
In file included from /usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_iterator.h:78:
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_construct.h:129:4: error: no matching function for call to 'construct_at'
  129 |           std::construct_at(__p, std::forward<_Args>(__args)...);
      |           ^~~~~~~~~~~~~~~~~
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/alloc_traits.h:805:9: note: in instantiation of function template specialization 'std::_Construct<(anonymous namespace)::RenderableForwarder, const std::shared_ptr<mir::graphics::Renderable> &, std::shared_ptr<const mir::scene::Surface>>' requested here
  805 |         { std::_Construct(__p, std::forward<_Args>(__args)...); }
      |                ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr_base.h:606:30: note: in instantiation of function template specialization 'std::allocator_traits<std::allocator<void>>::construct<(anonymous namespace)::RenderableForwarder, const std::shared_ptr<mir::graphics::Renderable> &, std::shared_ptr<const mir::scene::Surface>>' requested here
  606 |           allocator_traits<_Alloc>::construct(__a, _M_ptr(),
      |                                     ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr_base.h:970:6: note: in instantiation of function template specialization 'std::_Sp_counted_ptr_inplace<(anonymous namespace)::RenderableForwarder, std::allocator<void>, __gnu_cxx::_S_atomic>::_Sp_counted_ptr_inplace<const std::shared_ptr<mir::graphics::Renderable> &, std::shared_ptr<const mir::scene::Surface>>' requested here
  970 |             _Sp_cp_type(__a._M_a, std::forward<_Args>(__args)...);
      |             ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr_base.h:1719:14: note: in instantiation of function template specialization 'std::__shared_count<>::__shared_count<(anonymous namespace)::RenderableForwarder, std::allocator<void>, const std::shared_ptr<mir::graphics::Renderable> &, std::shared_ptr<const mir::scene::Surface>>' requested here
 1719 |         : _M_ptr(), _M_refcount(_M_ptr, __tag, std::forward<_Args>(__args)...)
      |                     ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr.h:463:4: note: in instantiation of function template specialization 'std::__shared_ptr<(anonymous namespace)::RenderableForwarder>::__shared_ptr<std::allocator<void>, const std::shared_ptr<mir::graphics::Renderable> &, std::shared_ptr<const mir::scene::Surface>>' requested here
  463 |         : __shared_ptr<_Tp>(__tag, std::forward<_Args>(__args)...)
      |           ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr.h:1007:14: note: in instantiation of function template specialization 'std::shared_ptr<(anonymous namespace)::RenderableForwarder>::shared_ptr<std::allocator<void>, const std::shared_ptr<mir::graphics::Renderable> &, std::shared_ptr<const mir::scene::Surface>>' requested here
 1007 |       return shared_ptr<_Tp>(_Sp_alloc_shared_tag<_Alloc>{__a},
      |              ^
/build/miracle-wm-git_clang/src/miracle-wm/src/forwarding_surface.cpp:187:31: note: in instantiation of function template specialization 'std::make_shared<(anonymous namespace)::RenderableForwarder, const std::shared_ptr<mir::graphics::Renderable> &, std::shared_ptr<const mir::scene::Surface>>' requested here
  187 |         result.push_back(std::make_shared<RenderableForwarder>(renderable, shared_from_this()));
      |                               ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_construct.h:96:5: note: candidate template ignored: constraints not satisfied [with _Tp = (anonymous namespace)::RenderableForwarder, _Args = <const std::shared_ptr<mir::graphics::Renderable> &, std::shared_ptr<const mir::scene::Surface>>]
   96 |     construct_at(_Tp* __location, _Args&&... __args)
      |     ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_construct.h:94:37: note: because '::new ((void *)0) _Tp(std::declval<_Args>()...)' would be invalid: allocating an object of abstract class type '(anonymous namespace)::RenderableForwarder'
   94 |       && requires { ::new((void*)0) _Tp(std::declval<_Args>()...); }
      |                                     ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_construct.h:133:38: error: allocating an object of abstract class type '(anonymous namespace)::RenderableForwarder'
  133 |       ::new(static_cast<void*>(__p)) _Tp(std::forward<_Args>(__args)...);
      |                                      ^
/usr/include/mirplatform/mir/graphics/renderable.h:105:18: note: unimplemented pure virtual method 'opaque_region' in 'RenderableForwarder'
  105 |     virtual auto opaque_region() const -> std::optional<geometry::Rectangles> = 0;
      |                  ^
2 errors generated.
make[2]: *** [CMakeFiles/miracle-wm-implementation.dir/build.make:656: CMakeFiles/miracle-wm-implementation.dir/src/forwarding_surface.cpp.o] Error 1
make[2]: *** Waiting for unfinished jobs....
In file included from <built-in>:1:
In file included from /build/miracle-wm-git_clang/src/build/CMakeFiles/miracle-wm-implementation.dir/cmake_pch.hxx:5:
In file included from /usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/vector:64:
In file included from /usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_algobase.h:67:
In file included from /usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_iterator.h:78:
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_construct.h:129:4: error: no matching function for call to 'construct_at'
  129 |           std::construct_at(__p, std::forward<_Args>(__args)...);
      |           ^~~~~~~~~~~~~~~~~
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/alloc_traits.h:805:9: note: in instantiation of function template specialization 'std::_Construct<miracle::ForwardingSurface, std::shared_ptr<mir::scene::Surface> &>' requested here
  805 |         { std::_Construct(__p, std::forward<_Args>(__args)...); }
      |                ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr_base.h:606:30: note: in instantiation of function template specialization 'std::allocator_traits<std::allocator<void>>::construct<miracle::ForwardingSurface, std::shared_ptr<mir::scene::Surface> &>' requested here
  606 |           allocator_traits<_Alloc>::construct(__a, _M_ptr(),
      |                                     ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr_base.h:970:6: note: in instantiation of function template specialization 'std::_Sp_counted_ptr_inplace<miracle::ForwardingSurface, std::allocator<void>, __gnu_cxx::_S_atomic>::_Sp_counted_ptr_inplace<std::shared_ptr<mir::scene::Surface> &>' requested here
  970 |             _Sp_cp_type(__a._M_a, std::forward<_Args>(__args)...);
      |             ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr_base.h:1719:14: note: in instantiation of function template specialization 'std::__shared_count<>::__shared_count<miracle::ForwardingSurface, std::allocator<void>, std::shared_ptr<mir::scene::Surface> &>' requested here
 1719 |         : _M_ptr(), _M_refcount(_M_ptr, __tag, std::forward<_Args>(__args)...)
      |                     ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr.h:463:4: note: in instantiation of function template specialization 'std::__shared_ptr<miracle::ForwardingSurface>::__shared_ptr<std::allocator<void>, std::shared_ptr<mir::scene::Surface> &>' requested here
  463 |         : __shared_ptr<_Tp>(__tag, std::forward<_Args>(__args)...)
      |           ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/shared_ptr.h:1007:14: note: in instantiation of function template specialization 'std::shared_ptr<miracle::ForwardingSurface>::shared_ptr<std::allocator<void>, std::shared_ptr<mir::scene::Surface> &>' requested here
 1007 |       return shared_ptr<_Tp>(_Sp_alloc_shared_tag<_Alloc>{__a},
      |              ^
/build/miracle-wm-git_clang/src/miracle-wm/src/dying_surface_manager.cpp:111:35: note: in instantiation of function template specialization 'std::make_shared<miracle::ForwardingSurface, std::shared_ptr<mir::scene::Surface> &>' requested here
  111 |     auto animating_surface = std::make_shared<ForwardingSurface>(surface);
      |                                   ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_construct.h:96:5: note: candidate template ignored: constraints not satisfied [with _Tp = miracle::ForwardingSurface, _Args = <std::shared_ptr<mir::scene::Surface> &>]
   96 |     construct_at(_Tp* __location, _Args&&... __args)
      |     ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_construct.h:94:37: note: because '::new ((void *)0) _Tp(std::declval<_Args>()...)' would be invalid: allocating an object of abstract class type 'miracle::ForwardingSurface'
   94 |       && requires { ::new((void*)0) _Tp(std::declval<_Args>()...); }
      |                                     ^
/usr/bin/../lib64/gcc/x86_64-pc-linux-gnu/15.2.1/../../../../include/c++/15.2.1/bits/stl_construct.h:133:38: error: allocating an object of abstract class type 'miracle::ForwardingSurface'
  133 |       ::new(static_cast<void*>(__p)) _Tp(std::forward<_Args>(__args)...);
      |                                      ^
/usr/include/mirserver-internal/mir/scene/surface.h:94:18: note: unimplemented pure virtual method 'set_opaque_region' in 'ForwardingSurface'
   94 |     virtual void set_opaque_region(geometry::Rectangles const& region) = 0;
      |                  ^
2 errors generated.
make[2]: *** [CMakeFiles/miracle-wm-implementation.dir/build.make:672: CMakeFiles/miracle-wm-implementation.dir/src/dying_surface_manager.cpp.o] Error 1
make[1]: *** [CMakeFiles/Makefile2:187: CMakeFiles/miracle-wm-implementation.dir/all] Error 2
make[1]: *** Waiting for unfinished jobs....
[ 63%] Built target test_miracle_wm_config_c_api
make: *** [Makefile:136: all] Error 2
[1m[31m==> ERROR:(B[m[1m A failure occurred in build().(B[m
[1m    Aborting...(B[m
